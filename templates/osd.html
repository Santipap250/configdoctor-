<!-- templates/osd.html -->
<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OSD Designer â€” OBIXConfig Doctor</title>
{% set og_title       = "OSD Designer â€” OBIXConfig Doctor" %}
{% set og_description = "à¸­à¸­à¸à¹à¸šà¸š OSD layout à¸ªà¸³à¸«à¸£à¸±à¸šà¹‚à¸”à¸£à¸™ FPV à¹à¸šà¸š drag-and-drop à¹à¸¥à¹‰à¸§ export CLI à¹„à¸”à¹‰à¹€à¸¥à¸¢" %}
{% set og_url         = "https://configdoctor.onrender.com/osd" %}
{% include "partials/og_tags.html" %}

  <link rel="stylesheet" href="{{ url_for('static', filename='css/osd.css') }}">
  <!-- re-use global stylesheet if you want: <link rel="stylesheet" href="/static/css/style.css"> -->
</head>
<body class="osd-page">

<header class="osd-header">
  <div class="logo-row">
    <img src="{{ url_for('static', filename='img/obix-logo.png') }}" alt="OBIX" class="osd-logo" />
    <h1>OSD Designer</h1>
  </div>

  <div class="osd-actions">
    <button id="btnPreview" class="btn">ğŸ” Preview</button>
    <button id="btnExport" class="btn primary">ğŸ“¤ Export (à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”)</button>
    <button id="btnSaveServer" class="btn">ğŸ’¾ Save on server</button>
    <a href="{{ url_for('downloads_index') }}" class="btn ghost">ğŸ“‚ Saved files</a>
  </div>
</header>

<main class="osd-main">
  <!-- Left: palette -->
  <aside class="palette">
    <h3>Elements</h3>
    <div class="palette-grid">
      <button class="pal-item" data-type="battery">ğŸ”‹ Battery</button>
      <button class="pal-item" data-type="voltage">âš¡ Voltage</button>
      <button class="pal-item" data-type="rssi">ğŸ“¶ RSSI</button>
      <button class="pal-item" data-type="text">ğŸ…°ï¸ Text</button>
      <button class="pal-item" data-type="timer">â± Timer</button>
      <button class="pal-item" data-type="gps">ğŸ“ GPS</button>
      <button class="pal-item" data-type="custom">âœ³ï¸ Custom</button>
    </div>

    <hr>
    <h4>Grid & Snap</h4>
    <label><input type="checkbox" id="snapToGrid" checked> Snap to grid</label>
    <label>Grid size <input id="gridSize" type="number" min="4" max="64" value="8"></label>

    <hr>
    <h4>Canvas</h4>
    <label>Width <input id="canvasW" type="number" value="640"></label>
    <label>Height <input id="canvasH" type="number" value="360"></label>
    <button id="btnResizeCanvas" class="btn">Apply</button>
  </aside>

  <!-- Center: canvas / preview -->
  <section class="canvas-wrap">
    <div id="canvas" class="canvas" tabindex="0" role="application" aria-label="OSD designer canvas">
      <!-- items rendered here -->
    </div>

    <div class="canvas-footer">
      <div class="canvas-stats">
        <span id="itemCount">0 items</span>
        <span id="canvasSizeLabel">640Ã—360</span>
      </div>
      <div class="canvas-actions">
        <button id="btnClear" class="btn ghost">ğŸ§¹ Clear</button>
        <button id="btnCenter" class="btn ghost">ğŸ¯ Center all</button>
      </div>
    </div>
  </section>

  <!-- Right: properties -->
  <aside class="props">
    <h3>Selected</h3>
    <div id="noSelection" class="muted small">à¹„à¸¡à¹ˆà¸¡à¸µà¸Šà¸´à¹‰à¸™à¸ªà¹ˆà¸§à¸™à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸ â€” à¹à¸•à¸°à¸—à¸µà¹ˆà¸­à¸‡à¸„à¹Œà¸›à¸£à¸°à¸à¸­à¸šà¹€à¸à¸·à¹ˆà¸­à¹à¸à¹‰à¹„à¸‚</div>

    <div id="propEditor" class="prop-editor" hidden>
      <label>Type: <span id="propType"></span></label>
      <label>Label <input id="propLabel" type="text"></label>
      <label>X <input id="propX" type="number"></label>
      <label>Y <input id="propY" type="number"></label>
      <label>Size <input id="propSize" type="number" min="8" max="80" value="14"></label>
      <label>Color <input id="propColor" type="color" value="#ffffff"></label>
      <div style="display:flex; gap:8px; margin-top:8px;">
        <button id="btnApplyProp" class="btn primary">Apply</button>
        <button id="btnDeleteProp" class="btn danger">Delete</button>
      </div>
    </div>

    <hr>
    <h4>Export Options</h4>
    <label>Format
      <select id="exportFormat">
        <option value="txt">Text (human)</option>
        <option value="cli">Betaflight CLI (pseudo)</option>
        <option value="json">JSON</option>
      </select>
    </label>

    <label><input id="exportIncludeMeta" type="checkbox" checked> include metadata</label>
    <div style="margin-top:10px;">
      <button id="btnExport2" class="btn primary">Export / Download</button>
    </div>
  </aside>
</main>

<!-- small helper area -->
<footer class="osd-footer">
  <div class="muted small">Tip: on mobile use two-finger drag to pan canvas if content gets bigger.</div>
</footer>

<script src="{{ url_for('static', filename='js/osd.js') }}"></script>
</body>
</html>