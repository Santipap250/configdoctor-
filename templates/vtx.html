<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8" />
<title>VTX Bands & Channels ‚Äî OBIXConfig Doctor</title>
{% set og_title       = "VTX Bands & Channels ‚Äî OBIXConfig Doctor" %}
{% set og_description = "‡∏ï‡∏≤‡∏£‡∏≤‡∏á VTX Band ‡πÅ‡∏•‡∏∞ Channel ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á CLI ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏î‡∏£‡∏ô FPV" %}
{% set og_url         = "https://configdoctor.onrender.com/vtx" %}
{% include "partials/og_tags.html" %}
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<style>
/* small overrides for vtx page */
.vtx-page { max-width: 980px; margin: 18px auto; padding: 14px; }
.vtx-hero { display:flex; gap:14px; align-items:center; margin-bottom:12px; }
.vtx-card { padding:14px; border-radius:12px; background:linear-gradient(135deg,#0f1511,#0b0f0c); box-shadow:0 10px 28px rgba(0,0,0,0.45); }
.vtx-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap:12px; margin-top:12px; }
.small { font-size:0.92rem; opacity:0.9; }
.kv { font-weight:700; }
.freq-out { font-family:monospace; font-size:1.05rem; padding:8px; border-radius:8px; background:rgba(255,255,255,0.02); }
.copy-btn { padding:8px 10px; border-radius:8px; background:#238636; color:#fff; border:0; cursor:pointer; }
.warn { background:#fff4e5; color:#804b00; padding:8px; border-radius:8px; margin-top:10px; }
.table { width:100%; border-collapse:collapse; margin-top:8px; }
.table th, .table td { padding:6px 8px; text-align:left; border-bottom:1px solid rgba(255,255,255,0.03); font-size:0.95rem; }
.note { opacity:0.85; font-size:0.9rem; margin-top:8px; }
</style>
</head>
<body class="dark">
  <div class="top-bar center-logo" style="display:flex; align-items:center; justify-content:space-between; gap:8px;">
    <div style="display:flex; align-items:center; gap:10px;">
      <button id="hamburgerBtn" class="hamburger" aria-label="‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π" aria-controls="drawer" aria-expanded="false">
        <span class="lines" aria-hidden="true"><span></span><span></span><span></span></span>
      </button>
      <img src="{{ url_for('static', filename='img/obix-logo.png') }}" class="logo" style="height:34px;">
    </div>

    <div style="display:flex; align-items:center; gap:8px;">
      <button class="toggle-theme" onclick="toggleTheme()">üåó</button>
    </div>
  </div>

  <div class="container vtx-page">
    <div class="vtx-hero">
      <div style="flex:1">
        <h1 style="margin:0;">üì° VTX ‚Äî Band & Channel Helper</h1>
        <div class="small">‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å band / channel ‡πÅ‡∏•‡∏∞‡∏î‡∏π‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á ‚Äî ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö VTX (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)</div>
      </div>
      <div style="display:flex; gap:8px; align-items:center;">
        <a class="btn-ghost" href="/downloads" title="‡πÑ‡∏ü‡∏•‡πå DIFF ‡πÅ‡∏•‡∏∞ DUMP">üìÅ ‡πÑ‡∏ü‡∏•‡πå DIFF</a>
        <a class="btn-primary" href="/" title="‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å">üè† ‡∏Å‡∏•‡∏±‡∏ö</a>
      </div>
    </div>

    <div class="vtx-card">
      <div style="display:flex; gap:12px; flex-wrap:wrap; align-items:center;">
        <div style="flex:1; min-width:260px;">
          <label class="small">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Band</label>
          <select id="bandSelect" class="form-control">
            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å band --</option>
            <option value="race">Raceband (R)</option>
            <option value="fatshark_a">FatShark A</option>
            <option value="fatshark_b">FatShark B</option>
            <option value="fatshark_e">FatShark E</option>
            <option value="fatshark_f">FatShark F</option>
            <option value="manual">Manual / Custom (‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÄ‡∏≠‡∏á)</option>
          </select>
        </div>

        <div style="min-width:200px;">
          <label class="small">Channel / Number</label>
          <select id="chSelect" class="form-control">
            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å channel --</option>
          </select>
        </div>

        <div style="min-width:170px;">
          <label class="small">Power / PWR</label>
          <select id="pwrSelect" class="form-control">
            <option value="25">25 mW</option>
            <option value="200">200 mW</option>
            <option value="600">600 mW</option>
            <option value="1000">1 W</option>
          </select>
        </div>

        <div style="min-width:220px;">
          <label class="small">Frequency</label>
          <div id="freqDisplay" class="freq-out">‚Äî MHz</div>
        </div>
      </div>

      <div class="note">
        <strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</strong> ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ‚Äî ‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏¥‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á ‡∏Ñ‡∏ß‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢/‡∏Ç‡πâ‡∏≠‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô ‡πÅ‡∏•‡∏∞‡∏™‡πÄ‡∏õ‡∏Ñ VTX/‡πÅ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ô‡πà‡∏≤ ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏™‡∏°‡∏≠.
      </div>

      <div class="vtx-grid">
        <div>
          <h4 style="margin:8px 0;">‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå (‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å)</h4>
          <pre id="smartAudioCmd" class="cli-snippet">‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å band ‡πÅ‡∏•‡∏∞ channel ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</pre>
          <div style="display:flex; gap:8px; margin-top:8px;">
            <button class="copy-btn" onclick="copyResult()">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á</button>
            <button class="btn-ghost" onclick="fillManual()">‡πÉ‡∏™‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠</button>
          </div>

          <div class="warn" aria-live="polite" style="display:none;" id="vtxWarn"></div>
        </div>

        <div>
          <h4 style="margin:8px 0;">‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà (‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ)</h4>
          <table class="table" id="freqTable">
            <thead><tr><th>Band</th><th>Ch</th><th>Freq (MHz)</th></tr></thead>
            <tbody id="freqTableBody">
              <!-- JS will fill -->
            </tbody>
          </table>
        </div>

        <div>
          <h4 style="margin:8px 0;">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô ‡πÜ</h4>
          <p class="small">
            - Raceband ‡∏°‡∏±‡∏Å‡πÉ‡∏ä‡πâ‡πÅ‡∏Ç‡πà‡∏á (8 ‡∏ä‡πà‡∏≠‡∏á) ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÉ‡∏ô‡∏™‡∏ô‡∏≤‡∏°‡πÅ‡∏Ç‡πà‡∏á‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏´‡πà‡∏á.<br>
            - FatShark A/B/E/F ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡πÅ‡∏ß‡πà‡∏ô/‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ö‡∏ö‡πÄ‡∏Å‡πà‡∏≤/‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ.<br>
            - ‡∏´‡∏≤‡∏Å VTX ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö SmartAudio/Tramp ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ú‡πà‡∏≤‡∏ô OSD ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏µ‡πÇ‡∏°‡∏ó‡πÑ‡∏î‡πâ ‚Äî ‡πÅ‡∏ï‡πà‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÇ‡∏ï‡∏Ñ‡∏≠‡∏•‡∏Ç‡∏≠‡∏á VTX.
          </p>         
        </div>
      </div>
    </div>
  </div>

<script>
// Minimal band -> channel -> frequency mapping (common sets).
// NOTE: These are common reference values ‚Äî verify with your VTX manual.
const BAND_TABLES = {
  // Raceband (R1..R8) ‚Äî commonly used 8-channel raceband set
  "race": [
    {ch:"R1", f:5658},
    {ch:"R2", f:5695},
    {ch:"R3", f:5732},
    {ch:"R4", f:5769},
    {ch:"R5", f:5806},
    {ch:"R6", f:5843},
    {ch:"R7", f:5880},
    {ch:"R8", f:5917}
  ],
  // FatShark A: common "A" band channels (A1..A8)
  "fatshark_a": [
    {ch:"A1", f:5865},{ch:"A2", f:5845},{ch:"A3", f:5825},{ch:"A4", f:5805},
    {ch:"A5", f:5785},{ch:"A6", f:5765},{ch:"A7", f:5745},{ch:"A8", f:5725}
  ],
  // FatShark B
  "fatshark_b": [
    {ch:"B1", f:5733},{ch:"B2", f:5752},{ch:"B3", f:5771},{ch:"B4", f:5790},
    {ch:"B5", f:5809},{ch:"B6", f:5828},{ch:"B7", f:5847},{ch:"B8", f:5866}
  ],
  // FatShark E
  "fatshark_e": [
    {ch:"E1", f:5705},{ch:"E2", f:5685},{ch:"E3", f:5665},{ch:"E4", f:5645},
    {ch:"E5", f:5885},{ch:"E6", f:5905},{ch:"E7", f:5925},{ch:"E8", f:5945}
  ],
  // FatShark F (alternate legacy set)
  "fatshark_f": [
    {ch:"F1", f:5740},{ch:"F2", f:5760},{ch:"F3", f:5780},{ch:"F4", f:5800},
    {ch:"F5", f:5820},{ch:"F6", f:5840},{ch:"F7", f:5860},{ch:"F8", f:5880}
  ]
};

const bandSelect = document.getElementById('bandSelect');
const chSelect = document.getElementById('chSelect');
const freqDisplay = document.getElementById('freqDisplay');
const smartAudioCmd = document.getElementById('smartAudioCmd');
const freqTableBody = document.getElementById('freqTableBody');
const vtxWarn = document.getElementById('vtxWarn');

function populateTable() {
  freqTableBody.innerHTML = '';
  for (const key of Object.keys(BAND_TABLES)) {
    const rows = BAND_TABLES[key];
    for (const r of rows) {
      const tr = document.createElement('tr');
      const bandLabel = key.replace('fatshark_', 'FatShark ').toUpperCase();
      tr.innerHTML = `<td>${bandLabel}</td><td>${r.ch}</td><td>${r.f} MHz</td>`;
      freqTableBody.appendChild(tr);
    }
  }
}
populateTable();

function fillChannelsFor(bandKey) {
  chSelect.innerHTML = '<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å channel --</option>';
  if (!bandKey || bandKey === 'manual') return;
  const rows = BAND_TABLES[bandKey] || [];
  rows.forEach((r, idx) => {
    const opt = document.createElement('option');
    opt.value = r.f;
    opt.textContent = `${r.ch} ‚Äî ${r.f} MHz`;
    chSelect.appendChild(opt);
  });
}

bandSelect.addEventListener('change', (e) => {
  const val = e.target.value;
  fillChannelsFor(val);
  // show band rows highlight
  if (val && val !== 'manual') {
    const first = BAND_TABLES[val] && BAND_TABLES[val][0];
    if (first) {
      freqDisplay.textContent = '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å channel ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà';
      smartAudioCmd.textContent = '‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å channel';
    }
  } else if (val === 'manual') {
    freqDisplay.textContent = '‡πÉ‡∏™‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà (MHz) ‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á';
    smartAudioCmd.textContent = 'Manual mode ‚Äî ‡πÉ‡∏™‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î "‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á"';
  } else {
    freqDisplay.textContent = '‚Äî MHz';
    smartAudioCmd.textContent = '‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å band / channel';
  }
  vtxWarn.style.display = 'none';
});

chSelect.addEventListener('change', () => {
  const f = chSelect.value;
  const pwr = document.getElementById('pwrSelect').value;
  if (!f) { freqDisplay.textContent = '‚Äî MHz'; smartAudioCmd.textContent = '‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å channel'; return; }
  freqDisplay.textContent = `${f} MHz`;
  // example SmartAudio style "set_freq <MHz> <power_mW>" (this is illustrative)
  smartAudioCmd.textContent = `SmartAudio (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á): set_vtx_freq ${f} ; set_vtx_power ${pwr}mW`;
  // small warning for high power on certain bands
  const cellsHint = '';
  if (parseInt(pwr) >= 600) {
    vtxWarn.textContent = '‡∏£‡∏∞‡∏ß‡∏±‡∏á: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏π‡∏á (‚â•600mW) ‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡πâ‡∏≠‡∏ô ‚Äî ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢/‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
    vtxWarn.style.display = 'block';
  } else {
    vtxWarn.style.display = 'none';
  }
});

document.getElementById('pwrSelect').addEventListener('change', () => {
  // refresh smartAudioCmd with current freq
  const f = chSelect.value || '';
  const pwr = document.getElementById('pwrSelect').value;
  if (f) smartAudioCmd.textContent = `SmartAudio (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á): set_vtx_freq ${f} ; set_vtx_power ${pwr}mW`;
});

// manual fill
function fillManual(){
  const manual = prompt('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà (MHz) ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: 5865');
  if (!manual) return;
  const v = parseFloat(manual);
  if (isNaN(v) || v < 400 || v > 6000) { alert('‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'); return; }
  freqDisplay.textContent = `${v} MHz`;
  smartAudioCmd.textContent = `SmartAudio (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á): set_vtx_freq ${v} ; set_vtx_power ${document.getElementById('pwrSelect').value}mW`;
  chSelect.value = '';
  bandSelect.value = 'manual';
  vtxWarn.style.display = 'none';
}

function copyResult(){
  const t = smartAudioCmd.innerText || smartAudioCmd.textContent;
  navigator.clipboard.writeText(t).then(()=> {
    alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');
  }).catch(()=> alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à'));
}

/* small helpers used by site */
function toggleTheme(){
  document.body.classList.toggle('dark');
  document.body.classList.toggle('light');
  try{ localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light'); }catch(e){}
}
</script>
</body>
</html>